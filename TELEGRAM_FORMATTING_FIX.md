# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Telegram

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

–ë–æ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–ª –∏–∑-–∑–∞ –æ—à–∏–±–æ–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å–æ–æ–±—â–µ–Ω–∏–π Telegram:

```
Can't parse entities: can't find end of the entity starting at byte offset 333
TelegramError: HTTP 400 Bad Request
```

## ‚ùå –ü—Ä–∏—á–∏–Ω—ã

1. **–°–º–µ—à–∞–Ω–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `*<b>text</b>*` (Markdown + HTML)
2. **–ü—Ä–æ–±–ª–µ–º–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã**: –ü–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è `(_)` –≤ —Ç–µ–∫—Å—Ç–µ —Å Markdown
3. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å —Å—Å—ã–ª–æ–∫**: `[text](url)` –≤ HTML —Ä–µ–∂–∏–º–µ
4. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤**: –î—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è callback handlers

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –ü–æ–ª–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ HTML
```python
# –ë—ã–ª–æ:
parse_mode='Markdown'
text="*–ñ–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç*"

# –°—Ç–∞–ª–æ:
parse_mode='HTML'
text="<b>–ñ–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç</b>"
```

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```python
# –ë—ã–ª–æ:
f"*<b>–¢–µ–≥:</b>* `{tag}`"

# –°—Ç–∞–ª–æ:
f"<b>–¢–µ–≥:</b> <code>{tag}</code>"
```

### 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫
```python
# –ë—ã–ª–æ:
f"[–°–∫–∞—á–∞—Ç—å]({file_url})"

# –°—Ç–∞–ª–æ:
f"<a href='{file_url}'>–°–∫–∞—á–∞—Ç—å</a>"
```

### 4. –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
```python
# –î–æ–±–∞–≤–ª–µ–Ω–æ:
parse_mode=None  # –î–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
- `*text*` ‚Üí `<b>text</b>` (–∂–∏—Ä–Ω—ã–π)
- `` `text` `` ‚Üí `<code>text</code>` (–∫–æ–¥)
- `[link](url)` ‚Üí `<a href='url'>link</a>` (—Å—Å—ã–ª–∫–∏)

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:
- –ü–µ—Ä–µ–Ω–æ—Å `traffic_limit` –∏ `confirm_create` –≤ fallbacks conversation
- –£–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö callback handlers
- –£–ª—É—á—à–µ–Ω–∏–µ error_handler —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω**:
- –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–º–æ-–∫–∞–º–ø–∞–Ω–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç
- –í—ã–±–æ—Ä –ª–∏–º–∏—Ç–∞ —Ç—Ä–∞—Ñ–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç  
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –º–µ–Ω—é —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ù–µ—Ç –æ—à–∏–±–æ–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞

‚úÖ **–£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ –æ—à–∏–±–∫–∞–º**:
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
- –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã—Ö –æ—à–∏–±–æ–∫

## üìã –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **–û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**:
   ```
   /start ‚Üí üéÅ –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–º–æ-–∫–∞–º–ø–∞–Ω–∏—é ‚Üí –í–≤–æ–¥ —Ç–µ–≥–∞ ‚Üí –í—ã–±–æ—Ä –ª–∏–º–∏—Ç–∞ ‚Üí –í–≤–æ–¥ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ ‚Üí –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
   ```

2. **–õ–æ–≥–∏**:
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –æ—à–∏–±–æ–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞
   docker logs promo-remna-bot | grep -i "parse entities"
   
   # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—É—Å—Ç–æ (–±–µ–∑ –æ—à–∏–±–æ–∫)
   ```

3. **–ù–∞–≤–∏–≥–∞—Ü–∏—è**:
   - –í—Å–µ –∫–Ω–æ–ø–∫–∏ –æ—Ç–≤–µ—á–∞—é—Ç
   - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç
   - "–ù–∞–∑–∞–¥ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é" —Ä–∞–±–æ—Ç–∞–µ—Ç

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–î–ª—è –±—É–¥—É—â–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π**: –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTML —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–º–µ—Å—Ç–æ Markdown
2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ —Å–∏–º–≤–æ–ª—ã `*`, `_`, `[`, `]` –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å
3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `parse_mode=None` –¥–ª—è –∞–≤–∞—Ä–∏–π–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

–≠—Ç–æ—Ç —Ñ–∏–∫—Å —Ä–µ—à–∞–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫—É—é –ø—Ä–æ–±–ª–µ–º—É —Å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é –±–æ—Ç–∞ –∏ –¥–µ–ª–∞–µ—Ç –µ–≥–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω—ã–º! üéâ